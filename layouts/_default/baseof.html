<!doctype html>
<html lang="en" data-theme="light">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description"
    content="{{ with .Params.description }}{{ . }}{{ else }}{{ site.Params.description }}{{ end }}" />
  <meta name="author" content="{{ site.Params.name }}" />
  <title>
    {{- if .IsHome -}}
    {{ site.Params.name }} · {{ site.Params.role }}
    {{- else -}}
    {{ .Title }} · {{ site.Title }}
    {{- end -}}
  </title>
  {{ partial "meta.html" . }}
  {{ $styles := resources.Get "css/main.css" | minify | fingerprint }}
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Lora:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ $styles.RelPermalink }}" integrity="{{ $styles.Data.Integrity }}" />
</head>

<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="site-logo" href="/">
        <span class="site-logo__name">{{ site.Params.name }}</span>
        {{ with site.Params.role }}
        <span class="site-logo__role">{{ . }}</span>
        {{ end }}
      </a>
      <nav class="site-nav" aria-label="Primary">
        {{ with site.Menus.main }}
        <ul>
          {{ range . }}
          {{ $isExternal := or (strings.HasPrefix .URL "http://") (strings.HasPrefix .URL "https://") }}
          <li>
            <a href="{{ .URL }}" {{ if and (not $isExternal) (hasPrefix $.RelPermalink .URL) }}class="active" {{ end
              }}>{{ .Name }}</a>
          </li>
          {{ end }}
          <li>
            <button id="theme-toggle" aria-label="Toggle Dark Mode"
              style="background:none;border:none;cursor:pointer;color:inherit;padding:0;display:flex;align-items:center;">
              <svg id="moon-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                style="display:none;">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
              </svg>
              <svg id="sun-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                style="display:none;">
                <circle cx="12" cy="12" r="5"></circle>
                <line x1="12" y1="1" x2="12" y2="3"></line>
                <line x1="12" y1="21" x2="12" y2="23"></line>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                <line x1="1" y1="12" x2="3" y2="12"></line>
                <line x1="21" y1="12" x2="23" y2="12"></line>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
              </svg>
            </button>
          </li>
        </ul>
        {{ end }}
      </nav>
    </div>
  </header>

  <script>
    (function () {
      const toggle = document.getElementById('theme-toggle');
      const moon = document.getElementById('moon-icon');
      const sun = document.getElementById('sun-icon');
      const html = document.documentElement;

      function setTheme(theme) {
        html.setAttribute('data-theme', theme);
        localStorage.setItem('theme', theme);
        if (theme === 'dark') {
          moon.style.display = 'none';
          sun.style.display = 'block';
        } else {
          moon.style.display = 'block';
          sun.style.display = 'none';
        }
      }

      // Check local storage or system preference
      const savedTheme = localStorage.getItem('theme');
      const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

      if (savedTheme) {
        setTheme(savedTheme);
      } else if (systemDark) {
        setTheme('dark');
      } else {
        setTheme('light');
      }

      toggle.addEventListener('click', () => {
        const currentTheme = html.getAttribute('data-theme');
        setTheme(currentTheme === 'dark' ? 'light' : 'dark');
      });
    })();
  </script>

  <main class="site-main">
    {{ block "main" . }}{{ end }}
  </main>

  <footer class="site-footer">
    <div class="container footer-inner">
      <div>
        <p class="footer-name">{{ site.Params.name }}</p>
        <p class="footer-role">{{ site.Params.role }}</p>
        <p class="footer-contact">
          {{ site.Params.location }} · <a href="mailto:{{ site.Params.email }}">{{ site.Params.email }}</a>
        </p>
        {{ with site.Params.footer.text }}
        <p class="footer-note">{{ . }}</p>
        {{ end }}
      </div>
      <div class="footer-links">
        {{ partial "social-icons.html" . }}
      </div>
    </div>
  </footer>
</body>

</html>